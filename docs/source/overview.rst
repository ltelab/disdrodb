========================
Software Structure
========================


Overview of the disdrodb project folders structure
============================================================


The current software structure is described below:

| ğŸ“ data/
| ğŸ“ disdrodb/
| â”œâ”€â”€ ğŸ“ api
|     â”œâ”€â”€ ğŸ“œ checks.py
|     â”œâ”€â”€ ğŸ“œ info.py
|     â”œâ”€â”€ ğŸ“œ io.py
|     â”œâ”€â”€ ğŸ“œ metadata.py
| â”œâ”€â”€ ğŸ“ data_transfer
|     â”œâ”€â”€ ğŸ“œ download_data.py
|     â”œâ”€â”€ ğŸ“œ upload_data.py
| â”œâ”€â”€ ğŸ“ l0
|     â”œâ”€â”€ ğŸ“ configs
|     	â”œâ”€â”€ ğŸ“ `<sensor_name>`
|     		â”œâ”€â”€ ğŸ“œ \*.yml
|     â”œâ”€â”€ ğŸ“ manuals
|       â”œâ”€â”€ ğŸ“œ \*.pdf
|     â”œâ”€â”€ ğŸ“ readers
|     	â”œâ”€â”€ ğŸ“ `<data_source>`
|           â”œâ”€â”€ ğŸ“œ \<reader_name>.py
|     â”œâ”€â”€ ğŸ“ scripts
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0_station.py
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0a.py
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0a_station.py
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0b.py
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0b_station.py
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0b_concat.py
|         â”œâ”€â”€ ğŸ“œ run_disdrodb_l0b_concat_station.py
|     â”œâ”€â”€ ğŸ“œ check_configs.py
|     â”œâ”€â”€ ğŸ“œ check_metadata.py
|     â”œâ”€â”€ ğŸ“œ check_standards.py
|     â”œâ”€â”€ ğŸ“œ io.py
|     â”œâ”€â”€ ğŸ“œ issue.py
|     â”œâ”€â”€ ğŸ“œ l0_processing.py
|     â”œâ”€â”€ ğŸ“œ l0a_processing.py
|     â”œâ”€â”€ ğŸ“œ l0b_processing.py
|     â”œâ”€â”€ ğŸ“œ l0b_concat.py
|     â”œâ”€â”€ ğŸ“œ l0b_processing.py
|     â”œâ”€â”€ ğŸ“œ l0_reader.py
|     â”œâ”€â”€ ğŸ“œ metadata.py
|     â”œâ”€â”€ ğŸ“œ standards.py
|     â”œâ”€â”€ ğŸ“œ summary.py
|     â”œâ”€â”€ ğŸ“œ template_tools.py
| â”œâ”€â”€ ğŸ“ l1/
| â”œâ”€â”€ ğŸ“ l2/
| â”œâ”€â”€ ğŸ“ tests/
|   â”œâ”€â”€ ğŸ“œ \*.py
| â”œâ”€â”€ ğŸ“ api/
| â”œâ”€â”€ ğŸ“ utils/
|   â”œâ”€â”€ ğŸ“œ logger.py
|   â”œâ”€â”€ ğŸ“œ scripts.py
|   â”œâ”€â”€ ğŸ“œ netcdf.py
| ğŸ“ docs/
| ğŸ“ tutorials
| ğŸ“œ .gitignore
| ğŸ“œ .pre-commit-config.yaml
| ğŸ“œ CODE_OF_CONDUCT.md
| ğŸ“œ CONTRIBUTING.rst
| ğŸ“œ environment.yml
| ğŸ“œ LICENSE
| ğŸ“œ MANIFEST.in
| ğŸ“œ pyproject.toml
| ğŸ“œ README.md
| ğŸ“œ readthedocs.yml
| ğŸ“œ requirements.txt




Description of the disdrodb files and folders
================================================

The disdrodb folder contains the core software to process raw data files to DISDRODB L0 products. Here is a description of the files and folders:

+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Type  | Folder / files name                | Description                                                                                                  |
+=======+====================================+==============================================================================================================+
| ğŸ“    | api                                | Contains some generic functions                                                                              |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | checks.py                          | Basic checks on paths                                                                                        |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | info.py                            | DISDRODB File Information and parser                                                                         |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | io.py                              | Input output fuctions                                                                                        |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | metadata.py                        | Operation on metadata stations files                                                                         |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | data_transfer                      | Contains scripts to upload or download stations's data                                                       |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | download_data.py                   | Functions to download stations' raw data                                                                     |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | upload_data.py                     | Functions to upload to Zenodo stations' raw data                                                             |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | l0                                 | Contains the software to produce the DISDRODB L0 products                                                    |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | check_configs.py                   | Contain functionsChecking the sensorConfigs YAML files                                                       |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | check_metadata.py                  | Contain functionsChecking the metadata YAML files                                                            |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | check_standards.py                 | Contain functionsChecking that DISDRODB standards are met                                                    |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | io.py                              | Core functions to read/write files andCreate/remove directories                                              |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | issue.py                           | Code to manage the issues YAML files and exclude erroneous time steps during L0 processing                   |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | l0_processing.py                   | Contain the functions to process raw data files to L0A and L0B                                               |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | l0_reader.py                       | Contain the functions to check and retrieve the DISDRODB readers                                             |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | l0a_processing.py                  | Contain the functions to process raw data files to L0A format (Parquet)                                      |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | l0b_concat.py                      | Contain the functions to concatenate multiple L0B files into a single L0B netCDF                             |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | l0b_processing.py                  | Contain the functions to process raw data files to L0B format (netCDF4)                                      |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | l0b_processing.py                  | Contain the functions to run the DISDRODB L0 processing                                                      |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | metadata.py                        | Code to read/write the metadata YAML files                                                                   |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | standards.py                       | Contain the functions to encode the L0 sensor specifications defined in L0.configs                           |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | summary.py                         | Contain the functions to define a summary for each station                                                   |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | template_tools.py                  | Helpers to Create DISDRODB readers                                                                           |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | configs                            | Contains the specifications of various types of disdrometers                                                 |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | <sensor_name>                      | Name of the sensor (e.g. OTT_Parsivel, OTT_Parsivel2, Thies_LPM, RD_80)                                      |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | *.yml                              | YAML files defining sensorCharacteristics (e.g. diameter and velocity bins)                                  |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | manuals                            | Folder for the  Official disdrometers documentation                                                          |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | *.pdf                              | Official disdrometers documentation                                                                          |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | readers                            | Folder that contains all the readers functions                                                               |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | <data_source>                      | e.g. GPM, ARM, EPFL, ...                                                                                     |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | <reader_name>.py                   | Readers to transform raw data into DISDRODB L0 products                                                      |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | scripts                            | Contains a set of python scripts to beCalled from the terminal to launch the L0 processing                   |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0_station.py         | Script launching the L0 processing for a specific station                                                    |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0                    | Script launching the L0 processing for specific portion of the DISDRODB archive                              |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0a.py                | Script to run the L0A processing of DISDRODB stations                                                        |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0a_station.py        | Script to run the L0A processing of a specific DISDRODB station from the terminal                            |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0b.py                | Script to run the L0B processing of DISDRODB stations                                                        |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0b_station.py        | Script to run the L0B processing of a specific DISDRODB station from the terminal                            |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0b_concat.py         | Script to run the L0BConcatenation of available DISDRODB stations                                            |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | run_disdrodb_l0b_concat_station.py | Script toConcatenate all L0B files of a specific DISDRODB station into a single netCDF                       |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | l1                                 | Code not yet implemented. It willContain software to homogenize and qualityCheck DISDRODB L0 products        |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | l2                                 | Code not yet implemented. It willContain software to produce DISDRODB L2 products (i.e. DSD parameters, ...) |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | tests                              | Folder containing the tests (readers and unit tests)                                                         |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“    | utils                              | Folder to gather small, reusable functions orClasses                                                         |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | logger.py                          | Logger functions                                                                                             |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | scripts.py                         | Utility functions to run python scripts into the terminal                                                    |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+
| ğŸ“œ    | netcdf.py                          | Utility function toCheck and merge/concat multiple netCDF4 files                                             |
+-------+------------------------------------+--------------------------------------------------------------------------------------------------------------+



Description of the other folders
================================================

Some other folder are included in the DISDRODB repository. Here is a short description of their content:

* data : sample data to test the DISDRODB L0 l0_processing
* docs : documentation of the DISDRODB L0 processing
* tutorials : Jupyter notebooks to illustrate the DISDRODB L0 processing
